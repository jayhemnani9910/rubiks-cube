<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rubik's Cube Visualizer</title>
    <meta name="theme-color" content="#0f0f0f">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="src/css/main.css">
    <link rel="icon" href="favicon.ico">
</head>

<body>
    <div id="splash" class="splash">
        <div class="splash-card">
            <div class="splash-title">Rubik's Cube</div>
            <div class="splash-subtitle">Loading your session…</div>
            <div class="splash-grid">
                <span></span><span></span><span></span>
                <span></span><span></span><span></span>
                <span></span><span></span><span></span>
            </div>
        </div>
    </div>
    <header class="hud">
        <section class="hud-panel scramble-panel">
            <div class="panel-title">Scramble <span id="cube-label">3x3</span></div>
            <div id="seq" class="scramble-text">&nbsp;</div>
        </section>
        <section class="hud-panel preview-panel">
            <div class="panel-title">Preview</div>
            <div class="preview-net" id="preview-net">
                <div class="preview-face preview-up">
                    <span data-piece="u1"></span><span data-piece="u2"></span><span data-piece="u3"></span>
                    <span data-piece="u4"></span><span data-piece="u5"></span><span data-piece="u6"></span>
                    <span data-piece="u7"></span><span data-piece="u8"></span><span data-piece="u9"></span>
                </div>
                <div class="preview-face preview-left">
                    <span data-piece="l1"></span><span data-piece="l2"></span><span data-piece="l3"></span>
                    <span data-piece="l4"></span><span data-piece="l5"></span><span data-piece="l6"></span>
                    <span data-piece="l7"></span><span data-piece="l8"></span><span data-piece="l9"></span>
                </div>
                <div class="preview-face preview-front">
                    <span data-piece="f1"></span><span data-piece="f2"></span><span data-piece="f3"></span>
                    <span data-piece="f4"></span><span data-piece="f5"></span><span data-piece="f6"></span>
                    <span data-piece="f7"></span><span data-piece="f8"></span><span data-piece="f9"></span>
                </div>
                <div class="preview-face preview-right">
                    <span data-piece="r1"></span><span data-piece="r2"></span><span data-piece="r3"></span>
                    <span data-piece="r4"></span><span data-piece="r5"></span><span data-piece="r6"></span>
                    <span data-piece="r7"></span><span data-piece="r8"></span><span data-piece="r9"></span>
                </div>
                <div class="preview-face preview-back">
                    <span data-piece="b1"></span><span data-piece="b2"></span><span data-piece="b3"></span>
                    <span data-piece="b4"></span><span data-piece="b5"></span><span data-piece="b6"></span>
                    <span data-piece="b7"></span><span data-piece="b8"></span><span data-piece="b9"></span>
                </div>
                <div class="preview-face preview-down">
                    <span data-piece="d1"></span><span data-piece="d2"></span><span data-piece="d3"></span>
                    <span data-piece="d4"></span><span data-piece="d5"></span><span data-piece="d6"></span>
                    <span data-piece="d7"></span><span data-piece="d8"></span><span data-piece="d9"></span>
                </div>
            </div>
            <div id="preview-note" class="preview-note hide">Preview is available for 2x2 and 3x3 scrambles.</div>
        </section>
        <section class="hud-panel solver-panel">
            <div class="panel-title">Solver</div>
            <div id="solver-output" class="solver-output">Load a scramble to get started.</div>
            <div class="solver-actions">
                <button type="button" id="solver-validate">Validate Scramble</button>
                <button type="button" id="solver-hint">Get Hint</button>
            </div>
        </section>
        <section class="hud-panel timer-panel">
            <div class="panel-title">Timer</div>
            <div id="timer" class="timer-display" aria-live="polite">0.000</div>
            <div id="inspection" class="inspection-display hide">Inspection 15.0s</div>
            <div class="timer-controls">
                <button type="button" class="timer-toggle">Start / Stop (Space)</button>
                <button type="button" class="timer-reset">Reset (Esc)</button>
            </div>
        </section>
        <section class="hud-panel settings-panel">
            <div class="panel-title">Settings</div>
            <label class="setting-row">
                <span>Inspection</span>
                <input type="checkbox" id="inspection-toggle">
            </label>
            <label class="setting-row">
                <span>Sounds</span>
                <input type="checkbox" id="sound-toggle">
            </label>
            <label class="setting-row">
                <span>Session</span>
                <select id="session-select"></select>
            </label>
            <div class="session-actions">
                <button type="button" id="session-new">New</button>
                <button type="button" id="session-rename">Rename</button>
                <button type="button" id="session-delete">Delete</button>
            </div>
            <label class="setting-row">
                <span>Cube</span>
                <select id="cube-select"></select>
            </label>
            <div class="cube-meta">
                <span id="cube-scramble">Scramble: -- moves</span>
                <span id="cube-inspection">Inspection: --s</span>
            </div>
            <button type="button" id="tutorial-open" class="tutorial-open">Open Tutorial</button>
            <label class="setting-row">
                <span>Precision</span>
                <select id="precision-select">
                    <option value="2">2 decimals</option>
                    <option value="3">3 decimals</option>
                </select>
            </label>
            <label class="setting-row">
                <span>Theme</span>
                <select id="theme-select">
                    <option value="dark">Dark</option>
                    <option value="light">Light</option>
                    <option value="custom">Custom</option>
                </select>
            </label>
            <div id="custom-theme-panel" class="custom-theme hide">
                <div class="custom-field">
                    <label for="custom-bg-start">Background Start</label>
                    <input type="color" id="custom-bg-start">
                </div>
                <div class="custom-field">
                    <label for="custom-bg-end">Background End</label>
                    <input type="color" id="custom-bg-end">
                </div>
                <div class="custom-field">
                    <label for="custom-text">Text</label>
                    <input type="color" id="custom-text">
                </div>
                <div class="custom-field">
                    <label for="custom-border">Border</label>
                    <input type="color" id="custom-border">
                </div>
                <div class="custom-field">
                    <label for="custom-muted">Muted</label>
                    <input type="color" id="custom-muted">
                </div>
                <div class="custom-field">
                    <label for="custom-front">Front</label>
                    <input type="color" id="custom-front">
                </div>
                <div class="custom-field">
                    <label for="custom-back">Back</label>
                    <input type="color" id="custom-back">
                </div>
                <div class="custom-field">
                    <label for="custom-up">Up</label>
                    <input type="color" id="custom-up">
                </div>
                <div class="custom-field">
                    <label for="custom-down">Down</label>
                    <input type="color" id="custom-down">
                </div>
                <div class="custom-field">
                    <label for="custom-right">Right</label>
                    <input type="color" id="custom-right">
                </div>
                <div class="custom-field">
                    <label for="custom-left">Left</label>
                    <input type="color" id="custom-left">
                </div>
            </div>
        </section>
    </header>

    <main class="layout">
        <aside class="panel left-panel">
            <table class="face-moves">
                <caption>
                    <h3>Face Moves</h3>
                </caption>
                <thead>
                    <th>Key</th>
                    <th>Use</th>
                </thead>
                <tbody>
                    <tr>
                        <td>l</td>
                        <td>Left Clockwise</td>
                    </tr>
                    <tr>
                        <td>u</td>
                        <td>Up Clockwise</td>
                    </tr>
                    <tr>
                        <td>r</td>
                        <td>Right Clockwise</td>
                    </tr>
                    <tr>
                        <td>d</td>
                        <td>Down Clockwise</td>
                    </tr>
                    <tr>
                        <td>f</td>
                        <td>Front Clockwise</td>
                    </tr>
                    <tr>
                        <td>b</td>
                        <td>Back Clockwise</td>
                    </tr>
                    <tr>
                        <td>Shift + Key</td>
                        <td>Face AntiClockwise</td>
                    </tr>
                </tbody>
            </table>
        </aside>

        <section class="cube-stage">
            <div class="cube s23">
                <div class="front">
                    <div class="part" id="f1"></div>
                    <div class="part" id="f2"></div>
                    <div class="part" id="f3"></div>
                    <div class="part" id="f4"></div>
                    <div class="part" id="f5"></div>
                    <div class="part" id="f6"></div>
                    <div class="part" id="f7"></div>
                    <div class="part" id="f8"></div>
                    <div class="part" id="f9"></div>
                </div>
                <div class="back">
                    <div class="part" id="b1"></div>
                    <div class="part" id="b2"></div>
                    <div class="part" id="b3"></div>
                    <div class="part" id="b4"></div>
                    <div class="part" id="b5"></div>
                    <div class="part" id="b6"></div>
                    <div class="part" id="b7"></div>
                    <div class="part" id="b8"></div>
                    <div class="part" id="b9"></div>
                </div>
                <div class="up">
                    <div class="part" id="u1"></div>
                    <div class="part" id="u2"></div>
                    <div class="part" id="u3"></div>
                    <div class="part" id="u4"></div>
                    <div class="part" id="u5"></div>
                    <div class="part" id="u6"></div>
                    <div class="part" id="u7"></div>
                    <div class="part" id="u8"></div>
                    <div class="part" id="u9"></div>
                </div>
                <div class="down">
                    <div class="part" id="d1"></div>
                    <div class="part" id="d2"></div>
                    <div class="part" id="d3"></div>
                    <div class="part" id="d4"></div>
                    <div class="part" id="d5"></div>
                    <div class="part" id="d6"></div>
                    <div class="part" id="d7"></div>
                    <div class="part" id="d8"></div>
                    <div class="part" id="d9"></div>
                </div>
                <div class="right">
                    <div class="part" id="r1"></div>
                    <div class="part" id="r2"></div>
                    <div class="part" id="r3"></div>
                    <div class="part" id="r4"></div>
                    <div class="part" id="r5"></div>
                    <div class="part" id="r6"></div>
                    <div class="part" id="r7"></div>
                    <div class="part" id="r8"></div>
                    <div class="part" id="r9"></div>
                </div>
                <div class="left">
                    <div class="part" id="l1"></div>
                    <div class="part" id="l2"></div>
                    <div class="part" id="l3"></div>
                    <div class="part" id="l4"></div>
                    <div class="part" id="l5"></div>
                    <div class="part" id="l6"></div>
                    <div class="part" id="l7"></div>
                    <div class="part" id="l8"></div>
                    <div class="part" id="l9"></div>
                </div>
            </div>

            <div id="cube-note" class="cube-note hide">
                Visualizer currently renders a 3x3 cube. Scrambles and stats still follow the selected cube.
            </div>

            <div class="plane-cube hide">
                <div class="front">
                    <div class="part" id="xf1"></div>
                    <div class="part" id="xf2"></div>
                    <div class="part" id="xf3"></div>
                    <div class="part" id="xf4"></div>
                    <div class="part" id="xf5"></div>
                    <div class="part" id="xf6"></div>
                    <div class="part" id="xf7"></div>
                    <div class="part" id="xf8"></div>
                    <div class="part" id="xf9"></div>
                </div>
                <div class="back">
                    <div class="part" id="xb1"></div>
                    <div class="part" id="xb2"></div>
                    <div class="part" id="xb3"></div>
                    <div class="part" id="xb4"></div>
                    <div class="part" id="xb5"></div>
                    <div class="part" id="xb6"></div>
                    <div class="part" id="xb7"></div>
                    <div class="part" id="xb8"></div>
                    <div class="part" id="xb9"></div>
                </div>
                <div class="up">
                    <div class="part" id="xu1"></div>
                    <div class="part" id="xu2"></div>
                    <div class="part" id="xu3"></div>
                    <div class="part" id="xu4"></div>
                    <div class="part" id="xu5"></div>
                    <div class="part" id="xu6"></div>
                    <div class="part" id="xu7"></div>
                    <div class="part" id="xu8"></div>
                    <div class="part" id="xu9"></div>
                </div>
                <div class="down">
                    <div class="part" id="xd1"></div>
                    <div class="part" id="xd2"></div>
                    <div class="part" id="xd3"></div>
                    <div class="part" id="xd4"></div>
                    <div class="part" id="xd5"></div>
                    <div class="part" id="xd6"></div>
                    <div class="part" id="xd7"></div>
                    <div class="part" id="xd8"></div>
                    <div class="part" id="xd9"></div>
                </div>
                <div class="right">
                    <div class="part" id="xr1"></div>
                    <div class="part" id="xr2"></div>
                    <div class="part" id="xr3"></div>
                    <div class="part" id="xr4"></div>
                    <div class="part" id="xr5"></div>
                    <div class="part" id="xr6"></div>
                    <div class="part" id="xr7"></div>
                    <div class="part" id="xr8"></div>
                    <div class="part" id="xr9"></div>
                </div>
                <div class="left">
                    <div class="part" id="xl1"></div>
                    <div class="part" id="xl2"></div>
                    <div class="part" id="xl3"></div>
                    <div class="part" id="xl4"></div>
                    <div class="part" id="xl5"></div>
                    <div class="part" id="xl6"></div>
                    <div class="part" id="xl7"></div>
                    <div class="part" id="xl8"></div>
                    <div class="part" id="xl9"></div>
                </div>
            </div>

            <div class="buttons">
                <div class="sub-buttons face-btn">
                    <div class="btn-title">Clockwise</div>
                    <button type="button" class="left">L</button>
                    <button type="button" class="up">U</button>
                    <button type="button" class="right">R</button>
                    <button type="button" class="down">D</button>
                    <button type="button" class="front">F</button>
                    <button type="button" class="back">B</button>
                </div>
                <div class="sub-buttons main-btn">
                    <div class="view-btn">
                        <button type="button" class="left cube-turn" style="grid-row: 2/3; grid-column: 1/2">
                            &larr;
                        </button>
                        <button type="button" class="up cube-turn" style="grid-row: 1/2; grid-column: 2/3">
                            &uarr;
                        </button>
                        <button type="button" class="right cube-turn" style="grid-row: 2/3; grid-column: 3/4">
                            &rarr;
                        </button>
                        <button type="button" class="down cube-turn" style="grid-row: 2/3; grid-column: 2/3">
                            &darr;
                        </button>
                    </div>
                    <div class="misc-btn">
                        <button type="button" class="generate">Scramble</button>
                        <button type="button" class="reset">Reset</button>
                        <button type="button" class="view">View</button>
                        <button type="button" class="start-animation">Start Animation</button>
                        <button type="button" class="stop-animation">Stop Animation</button>
                    </div>
                </div>
                <div class="sub-buttons face-prime-btn">
                    <div class="btn-title">Anti-clockwise</div>
                    <button type="button" class="left">L'</button>
                    <button type="button" class="up">U'</button>
                    <button type="button" class="right">R'</button>
                    <button type="button" class="down">D'</button>
                    <button type="button" class="front">F'</button>
                    <button type="button" class="back">B'</button>
                </div>
            </div>
        </section>

        <aside class="panel right-panel">
            <table class="instructions">
                <caption>
                    <h3>Instructions</h3>
                </caption>
                <thead>
                    <th>Key</th>
                    <th>Use</th>
                </thead>
                <tbody>
                    <tr>
                        <td>&larr;</td>
                        <td>Cube Left</td>
                    </tr>
                    <tr>
                        <td>&uarr;</td>
                        <td>Cube Up</td>
                    </tr>
                    <tr>
                        <td>&rarr;</td>
                        <td>Cube Right</td>
                    </tr>
                    <tr>
                        <td>&darr;</td>
                        <td>Cube Down</td>
                    </tr>

                    <tr>
                        <td>g</td>
                        <td>Generate Scramble</td>
                    </tr>
                    <tr>
                        <td>z</td>
                        <td>Reset</td>
                    </tr>
                    <tr>
                        <td>Space</td>
                        <td>Start/Stop Timer</td>
                    </tr>
                    <tr>
                        <td>Esc</td>
                        <td>Reset Timer</td>
                    </tr>
                    <tr>
                        <td>v</td>
                        <td>Change View </td>
                    </tr>
                    <tr>
                        <td>a</td>
                        <td>Start Animation</td>
                    </tr>
                    <tr>
                        <td>Shift + a</td>
                        <td>Stop Animation</td>
                    </tr>
                </tbody>
            </table>

            <div class="stats-panel">
                <div class="panel-title">Stats</div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-label">Best</span>
                        <span id="stat-best" class="stat-value">--</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Worst</span>
                        <span id="stat-worst" class="stat-value">--</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Mean</span>
                        <span id="stat-mean" class="stat-value">--</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Ao5</span>
                        <span id="stat-ao5" class="stat-value">--</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Ao12</span>
                        <span id="stat-ao12" class="stat-value">--</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Ao100</span>
                        <span id="stat-ao100" class="stat-value">--</span>
                    </div>
                </div>
                <div class="pb-history">
                    <div class="pb-title">PB Progression</div>
                    <div id="pb-empty" class="pb-empty">No PBs yet.</div>
                    <ol id="pb-list" class="pb-list"></ol>
                </div>
            </div>

            <div class="charts-panel">
                <div class="panel-title">Trends</div>
                <div class="chart-fallback hide" id="chart-fallback">
                    Charts load when running the dev server (requires Chart.js).
                </div>
                <div class="chart-grid">
                    <div class="chart-card">
                        <div class="chart-title">Solve Trend</div>
                        <canvas id="chart-trend"></canvas>
                    </div>
                    <div class="chart-card">
                        <div class="chart-title">Time Histogram</div>
                        <canvas id="chart-histogram"></canvas>
                    </div>
                </div>
            </div>

            <div class="leaderboard-panel">
                <div class="panel-title">Leaderboard</div>
                <div class="leaderboard-controls">
                    <select id="leaderboard-cube"></select>
                    <button type="button" id="leaderboard-submit">Submit</button>
                </div>
                <div id="leaderboard-empty" class="leaderboard-empty">No records yet.</div>
                <ol id="leaderboard-list" class="leaderboard-list"></ol>
                <div class="leaderboard-note">Submissions open a GitHub issue with your details.</div>
            </div>

            <div class="history-panel">
                <div class="panel-title">Solve History</div>
                <div id="solve-empty" class="solve-empty">No solves yet.</div>
                <ol id="solve-list" class="solve-list"></ol>
                <button type="button" id="clear-solves" class="clear-solves">Clear Cube</button>
                <div class="io-panel">
                    <div class="panel-title">Export / Import</div>
                    <div class="io-actions">
                        <button type="button" id="export-json">Export JSON</button>
                        <button type="button" id="export-csv">Export CSV</button>
                    </div>
                    <div class="io-actions">
                        <button type="button" id="import-json">Import JSON</button>
                        <input type="file" id="import-file" class="hide" accept="application/json">
                    </div>
                    <div class="io-note">Exports/Imports apply to your local browser storage.</div>
                </div>
            </div>
        </aside>
    </main>

    <footer>
        <div class="copyright">
            <p>© 2020 Developed by Vasu Gondaliya</p>
        </div>
    </footer>
    <div id="install-banner" class="install-banner hide">
        <div class="install-text">
            Install this app for offline scrambles, stats, and sessions.
            <span id="install-note" class="install-note hide">On iOS: Share → Add to Home Screen.</span>
        </div>
        <div class="install-actions">
            <button type="button" id="install-button">Install</button>
            <button type="button" id="install-dismiss" class="install-dismiss" aria-label="Dismiss">×</button>
        </div>
    </div>
    <div id="onboarding" class="onboarding hide" role="dialog" aria-modal="true" aria-labelledby="onboarding-title">
        <div class="onboarding-card">
            <div id="onboarding-title" class="onboarding-title">Welcome</div>
            <div id="onboarding-text" class="onboarding-text"></div>
            <div class="onboarding-actions">
                <button type="button" id="onboarding-skip">Skip</button>
                <button type="button" id="onboarding-next">Next</button>
            </div>
        </div>
    </div>
    <div id="tutorial-modal" class="tutorial-modal hide" role="dialog" aria-modal="true" aria-labelledby="tutorial-title" onclick="if(event.target===this)this.classList.add('hide')">
        <div class="tutorial-card">
            <div class="tutorial-header">
                <div>
                    <div id="tutorial-title" class="tutorial-title">Tutorial</div>
                    <div id="tutorial-step" class="tutorial-step">Step 1</div>
                </div>
                <button type="button" id="tutorial-close" class="tutorial-close" aria-label="Close tutorial" onclick="document.getElementById('tutorial-modal').classList.add('hide')">×</button>
            </div>
            <div class="tutorial-body">
                <div class="tutorial-sidebar">
                    <div id="tutorial-list" class="tutorial-list"></div>
                </div>
                <div class="tutorial-content">
                    <div id="tutorial-step-title" class="tutorial-step-title"></div>
                    <div id="tutorial-step-text" class="tutorial-step-text"></div>
                    <div class="tutorial-moves">
                        <span class="tutorial-moves-label">Moves</span>
                        <span id="tutorial-moves" class="tutorial-moves-text"></span>
                        <button type="button" id="tutorial-play" class="tutorial-play">Play demo</button>
                    </div>
                </div>
            </div>
            <div class="tutorial-footer">
                <button type="button" id="tutorial-prev">Prev</button>
                <button type="button" id="tutorial-next">Next</button>
                <button type="button" id="tutorial-complete">Mark Lesson Complete</button>
            </div>
        </div>
    </div>
    <script type="module" src="src/js/main.js"></script>
</body>

</html>
